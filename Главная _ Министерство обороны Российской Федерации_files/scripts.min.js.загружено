function sfv(a,b){var c=a.title;switch(b){case"onblur":""==a.value&&(a.value=c);break;case"onfocus":a.value==c&&(a.value="")}return!0}function $(a){var b=!1;if("string"==typeof a){var c=new RegExp("^[\\w-\\(\\)]+$","");if(c.test(a))return document.getElementById(a);b=!0}return b&&"undefined"!=typeof jQuery?jQuery(a):"object"==typeof a?a:document.getElementById(a)}function validate(a,b){var c,d,e,f,g;if(cals&&calendarConvert&&cals.length>0)for(c=0;c<cals.length;c++)if(!calendarConvert(cals[c].name))return showSaveButton(),!1;var h=a.getElementsByTagName("select");if(h)for(c=0;c<h.length;c++)if(d=null,e=null,d=h[c].getAttribute("attrType"),e=h[c].getAttribute("attrTitle"),f=h[c].getAttribute("isMandatory"),g=h[c].value,e=e?"'"+e+"'":"",f&&"true"==f&&(null==g||""==g||""==trim(g)))return alert("object"==typeof validateMessages?validateMessages.mandatoryFieldEmpty.replace(/\{1\}/,e):"Required field not filled: "+e),!1;var i=a.getElementsByTagName("textarea");if(i)for(c=0;c<i.length;c++)if(d=null,e=null,d=i[c].getAttribute("attrType"),e=i[c].getAttribute("attrTitle"),f=i[c].getAttribute("isMandatory"),g=i[c].value,e=e?"'"+e+"'":"",f&&"true"==f&&(null==g||""==g||""==trim(g)))return alert("object"==typeof validateMessages?validateMessages.mandatoryFieldEmpty.replace(/\{1\}/,e):"Required field not filled: "+e),!1;var j=a.getElementsByTagName("input"),k=null;if(j)for(c=0;c<j.length;c++){var l=j[c].type||j[c].getAttribute("TYPE");if(l&&(l=l.toUpperCase()),"PASSWORD"==l)if(k){if(k.value!=j[c].value)return alert(b?b:"object"==typeof validateMessages?validateMessages.confirmPsssword:"Повторите ввод пароля"),showSaveButton(),!1;k=null}else k=j[c];else if("file"==j[c].type){if(e=null,e=j[c].getAttribute("attrTitle"),f=j[c].getAttribute("isMandatory"),g=j[c].value,e=e?"'"+e+"'":"",f&&"true"==f&&(null==g||""==g||"объект не выбран"==g||""==trim(g)))return alert("object"==typeof validateMessages?validateMessages.mandatoryFieldEmpty.replace(/\{1\}/,e):"Required field not filled: "+e),!1}else if("text"==j[c].type){d=null,e=null,d=j[c].getAttribute("attrType"),e=j[c].getAttribute("attrTitle"),f=j[c].getAttribute("isMandatory"),g=j[c].value,e=e?"'"+e+"'":"";var m=j[c].getAttribute("mask");if(null!=m&&(self.parseMask&&(m=parseMask(m)),j[c].value==m&&(j[c].value="")),f&&"true"==f&&(null==g||""==g||"объект не выбран"==g||""==trim(g)))return alert("object"==typeof validateMessages?validateMessages.mandatoryFieldEmpty.replace(/\{1\}/,e):"Required field not filled: "+e),!1;if(d&&g){if("2"==d){if(!checkinteger(g))return alert("object"==typeof validateMessages?validateMessages.onlyIntValues.replace(/\{1\}/,e):"Поле "+e+" может содержать только целые числа"),showSaveButton(),!1}else if("3"==d&&!checknumber(g))return alert("object"==typeof validateMessages?validateMessages.onlyFloatValues.replace(/\{1\}/,e):"Поле "+e+" может содержать только вещественные значения"),showSaveButton(),!1;if(self.validateField&&m&&"5"!=d&&0==validateField(j[c]))return showSaveButton(),!1}}else if("hidden"==j[c].type){if(d=null,e=null,d=j[c].getAttribute("attrType"),e=j[c].getAttribute("attrTitle"),f=j[c].getAttribute("isMandatory"),g=j[c].value,e=e?"'"+e+"'":"",f&&"true"==f&&(null==g||""==g||"объект не выбран"==g||""==trim(g)))return alert("object"==typeof validateMessages?validateMessages.mandatoryFieldEmpty.replace(/\{1\}/,e):"Required field not filled: "+e),!1;if(d&&g)if("2"==d){if(!checkinteger(g))return alert("object"==typeof validateMessages?validateMessages.onlyIntValues.replace(/\{1\}/,e):"Поле "+e+" может содержать только целые числа"),showSaveButton(),!1}else if("3"==d&&!checknumber(g))return alert("object"==typeof validateMessages?validateMessages.onlyFloatValues.replace(/\{1\}/,e):"Поле "+e+" может содержать только вещественные значения"),showSaveButton(),!1}}return!0}function setChanged(a){try{displayDialog=!0;var b=document.getElementById("modified");b&&(b.value="true",a||(b.value="false"))}catch(a){}return!0}function create(a){return a.cmd.value="create",!0}function switchOrgInfo(a,b){if(a){var c=a.getAttribute("aid");if(null!=c&&""!=c){var d="#a"+c.replace("@","\\@");jQuery(a.parentNode).find("a").removeClass(),jQuery(a).addClass("current");var e=jQuery(d);e.parent().children().css("display","none"),e.css("display","");var f=document.getElementById("printbutton").name;f=f+"&attrprint="+c,"false"==b?(jQuery("#photovideo").hide(),f+="&gallery=false"):jQuery("#photovideo").show(),jQuery("#printbutton").attr("attr",f)}}}function switchTopOrgInfo(a){if(a){var b=a.getAttribute("aid");if(null!=b&&""!=b){var c="#a"+b.replace("@","\\@");jQuery(a.parentNode).find("a").removeClass(),jQuery(a).addClass("active");var d=jQuery(c);d.parent().children().css("display","none"),d.css("display","")}}}function switchVideo(a,b){var c=jQuery("#"+a);c.parent().children().animate({opacity:"hide"},"slow").css("display","none"),c.css("display",""),c.animate({opacity:"show"},"slow");var d=jQuery("#"+b);d.animate({opacity:"hide"},"fast"),d.animate({opacity:"show"},"fast")}function switch3D(a,b){var c=jQuery("#"+a);c.parent().children().animate({opacity:"hide"},"slow").css("display","none"),c.css("display",""),c.animate({opacity:"show"},"slow");var d=jQuery("#"+b);d.animate({opacity:"hide"},"fast"),d.animate({opacity:"show"},"fast")}function switchVideoPagenator(a){var b=jQuery("#videoPage_"+a);b.parent().children().children().removeClass("videonava"),b.children().addClass("videonava")}function switch3DPagenator(a){var b=jQuery("#threeDPage_"+a);b.parent().children().children().removeClass("videonava"),b.children().addClass("videonava")}function recaptcha(a){var b=new Date;a.src="/jcaptcha?"+b.getTime()}function onPageNavChange(a,b,c,d,e,f,g,h){var i=jQuery("#"+c),j=parseInt(i[0].value)+a;return j>b&&(j=b),getHTMLwithParams(d,"id="+e+"&page="+j+f,g,h,g),getFalse()}function getHTMLwithParams(a,b,c,d,e,f){if(c){var g=a.lastIndexOf(".htm")!=-1||a.lastIndexOf(".sx")!=-1?"":a.indexOf("?")==-1?".htm":"",h=(a.indexOf("http://")==-1?"undefined"==typeof baseUrl?document.getElementsByTagName("base")[0].getAttribute("href"):baseUrl:"")+a+g;if("object"!=typeof b){var i="undefined"!=typeof b?b:"";b={_:(new Date).getTime(),inAjax:"true"};for(var j=i.split("&"),k=0;k<j.length;k++){var l=j[k].split("=");l[0]&&(b[l[0]]="undefined"!=typeof l[1]?l[1]:"")}}else b._=(new Date).getTime();var m=d?d:".loading",n=jQuery(c),o=n[0];o&&(null!=e&&""!=e&&(n.attr("subSelector",e),"#"+o.id!=e&&"."+o.className!=e||n.attr("dublicate",!0)),n.attr("loader",m),loadProcess(m,o,!0)),f&&"function"==typeof f&&n.ajaxComplete(function(a,b,c){c.context[0]==this&&f(this)}),jQuery.ajax({url:h,dataType:"html",type:"post",context:n,data:b,complete:function(a,b){if("success"===b||"notmodified"===b){if(!this.attr("skipResponse")){var c=this[0].getAttribute("subSelector"),d=this[0].getAttribute("dublicate");if(c){var e=jQuery("<div />").append(a.responseText),f=e.find("form "+c);f&&0!=f.size()||(f=e.find(c)),this.html(f&&0!=f.size()?d?f.html():f:ajaxMessages.getDataError),f=null,e.html("&nbsp;")}else this.html(a.responseText)}loadProcess(this.attr("loader"),this[0],!1)}}})}}function loadProcess(a,b,c){try{var d="string"==typeof a?jQuery(a)[0]:a;d&&(d.style.display=c?"":"none");var e="string"==typeof b?jQuery(b)[0]:b;e&&(e.style.display=c?"none":"")}catch(a){}}function newGrp(a,b,c){if(window.onunload=null,null==c||isNaN(c))var c="agrp";var d=getForm(a);if(d.cmd.value="prepare",null!=d[c]){d[c].value=b;var e=!0;null!=d.onsubmit&&(e=d.onsubmit()),e&&d.submit()}return!0}function showNextGrp(a,b,c,d){var e=$(b);if(e)if(null==lastGroup&&(lastGroup=c),b!=lastGroup){null!=d&&(lastParentID=d);var f=$(lastGroup);if(f){f.style.display="none";var g=$("td"+lastGroup);g&&"tabA"==g.className&&(g.className="tabP")}e.style.display="","tabP"==a.className&&(a.className="tabA");var h=document.getElementById("agrpChld");h&&(h.value=b),lastGroup=b}else try{$("formSubmit").style.display=""}catch(a){}}function loadDocumentParts(a,b,c,d,e){var f=jQuery(c),g=f[0]?f[0]:null;if(g){var h=g.getAttribute("loaddoc");if(h)"none"==g.style.display?f.css("display",""):f.css("display","none");else{var i=function(){jQuery.isFunction(e)&&e(),scrolltoChapter()},j=b&&"object"==typeof b?b:{};if(b&&"string"==typeof b)for(var k=b.split("&"),l=0;l<k.length;l++){var m=k[l].split("=");j[m[0].replace("?","")]=m[1]}j.pageCode||(j.pageCode=a),j.pubType||(j.pubType="cmsPoObj"),j.zone||(j.zone="ajax"),j.num||(j.num="10"),getHTMLwithParams("util/pubblock.sx",j,c,d,null,i),f.attr("loaddoc","true")}}}function scrolltoChapter(){window.location.hash="txt"}function startGame(a){currentGame&&loadGame(currentGame,a)}function loadGame(a,b){var c=jQuery(a);if(c&&c[0]){c.css("display","");var d=jQuery.browser.msie;if(b&&!d||(window.showShadow&&showShadow(),jQuery(".closeGame").css("display","")),currentGame=c[0],d){var e=jQuery(".game");e[0]||(e=jQuery("#gameHolder"),e.addClass("game")),e.closest("#center").css("position","static");var f=jQuery(window).height(),g=c.height(),h=f-g,i=0,j=50;h<=j?(f=g+j,i=10,window.resizeBy(0,(h<=0?h*-1:0)+j)):i=Math.round(h/3),e.css("top",i+"px");var k=jQuery(".area1");k.css("overflow","hidden"),k.attr("oldHeight",k.height()),jQuery(".area1").add("#overlay").height(f)}}}function closeGame(a){if(currentGame&&!a&&(currentGame.style.display="none"),jQuery(".closeGame").css("display","none"),hideShadow(),jQuery.browser.msie){var b=jQuery(".area1");b.css("overflow","visible"),b.height(b.attr("oldHeight")),jQuery("#startGame").css("display","")}}function armyTypePic(a,b){var c=jQuery(a);if(c){var d=c.css("background-image");b?(c.attr("oldsrc",d),c.css("background-image",d.replace(".gif","a.gif"))):c.css("background-image",c.attr("oldsrc"))}}function set_style(a){var b=d.getElementById("page"),c=b.className.length?b.className.split(" "):Array(3);return c[0]=a.theme||c[0]||"theme1",c[1]=a.font||c[1]||"font1",c[2]=a.kern||c[2]||"kern1",b.className=c.join(" "),createCookie("thlPortalStyle",b.className,0),!1}function rateObject(a,b,c){if(a&&b)try{for(var e,d=new Object,f=0;f<a.elements.length;f++)e=a.elements[f],e&&e&&e.type&&e.name&&("[object Attr]"==e.name||("RADIO"!=e.type.toUpperCase()||e.checked)&&(d["params("+e.name+")"]=e.value));d.pageCode=d["params(_pageId)"],d.pubType="cmsPoRatingResult",d.zone="ajax",d.num=10,loadDocumentParts("util/pubblock.sx",d,"#"+b,".loading",c)}catch(a){alert(a)}return!1}function make_dev_string(a){document.write('<div class="notice"><a href="'+a+'" class="submit"><span>Сообщить об ошибке</span></a></div>')}function preload(a,b){var c=new Image;return c.src=a,b?c:a}d=document;var lastGroup,lastParentID,lastSubGroupKeys=new Array,lastSubGroupValues=new Array,currentGame=null;jQuery(d).ready(function(){jQuery("span.ftr_block").hide()});